// Copyright (c) 2022  The Go-Enjin Authors
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

[data-block-type="index"] {

  & > .content > section {

    nav {
      width: 100%;
      height: 50px;
      margin-bottom: var(--page--flex--gap);

      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-items: center;
      align-content: flex-start;
      justify-content: space-between;

      color: var(--style--accent--fg);
      background-color: var(--style--accent--bg);

      a {
       color: var(--style--accent--fg);
      }

      ul {
        list-style: none;
        display: flex;
        flex-wrap: nowrap;
        flex-direction: row;
        align-items: center;
        align-content: flex-start;
        justify-content: flex-start;

        margin-left: 10px;
        margin-right: 10px;

        &.index-views li {
          display: inline-block;
          margin: 5px;
          padding: 1px 5px;
          border-radius: 3px;
          border: 1px solid var(--style--accent--fg);

          .deeplink {
            display: inline-block;
            font-size: smaller;
            opacity: 0.34;
          }
          &:hover .deeplink {
            opacity: 0.77;
          }
        }

        &.index-filters {
          li {
            position: relative;

            input[type="checkbox"] {
              display: none;
            }

            .dropdown > .dropdown-selected > :is(.open,.close) {
              display: none;
            }

            input[type="checkbox"]:checked       ~ .dropdown > .dropdown-selected > .close,
            input[type="checkbox"]:not(:checked) ~ .dropdown > .dropdown-selected > .open {
              display: inline-block;
            }

            input[type="checkbox"]:checked ~ .dropdown > .dropdown-menu {
              display: flex;
            }

            .dropdown {
              display: flex;
              flex-direction: column;
              flex-wrap: nowrap;

              position: relative;
              padding: 0 5px;

              .dropdown-selected {
                display: flex;
                flex-direction: row;
                justify-content: space-between;

                label {
                  width: 100%;
                  white-space: nowrap;
                  text-overflow: ellipsis;
                }
              }

              .dropdown-menu {
                display: none;
                flex-direction: column;
                flex-wrap: nowrap;

                position: absolute;
                z-index: var(--z--menus);

                top: 35px;
                padding: 5px;
                min-width: 100%;

                color: var(--style--accent--fg);
                background-color: var(--style--accent--bg);

                a {
                  white-space: nowrap;
                  text-overflow: ellipsis;
                }
              }

            }

            &.reset-filters {
              margin-left: 5px;
            }
          }
        }

      }
    }

    nav .index-filters[data-view],
    section[data-view],
    footer[data-view] {
      display: none;
    }

    .anchor[data-view-count="2"]:not(:target):nth-child(2) ~ nav .index-filters[data-view-present="true"],
    .anchor[data-view-count="2"]:not(:target):nth-child(2) ~ section[data-view-present="true"],
    .anchor[data-view-count="2"]:not(:target):nth-child(2) ~ footer[data-view-present="true"],
    .anchor[data-view-count="2"][data-view-present="false"]:not(:target):nth-child(2) ~ nav .index-filters[data-view="0"],
    .anchor[data-view-count="2"][data-view-present="false"]:not(:target):nth-child(2) ~ section[data-view="0"],
    .anchor[data-view-count="2"][data-view-present="false"]:not(:target):nth-child(2) ~ footer[data-view="0"],
    .anchor[data-view="0"]:target ~ nav .index-filters[data-view="0"],
    .anchor[data-view="1"]:target ~ nav .index-filters[data-view="1"],
    .anchor[data-view="2"]:target ~ nav .index-filters[data-view="2"],
    .anchor[data-view="3"]:target ~ nav .index-filters[data-view="3"],
    .anchor[data-view="4"]:target ~ nav .index-filters[data-view="4"],
    .anchor[data-view="0"]:target ~ section[data-view="0"],
    .anchor[data-view="1"]:target ~ section[data-view="1"],
    .anchor[data-view="2"]:target ~ section[data-view="2"],
    .anchor[data-view="3"]:target ~ section[data-view="3"],
    .anchor[data-view="4"]:target ~ section[data-view="4"],
    .anchor[data-view="0"]:target ~ footer[data-view="0"],
    .anchor[data-view="1"]:target ~ footer[data-view="1"],
    .anchor[data-view="2"]:target ~ footer[data-view="2"],
    .anchor[data-view="3"]:target ~ footer[data-view="3"],
    .anchor[data-view="4"]:target ~ footer[data-view="4"] {
      display: flex;
    }

    .anchor[data-view-count="2"][data-view-present="false"]:not(:target):nth-child(2) ~ nav > .index-views > [data-view="0"],
    nav > .index-views > [data-view-present="true"],
    .anchor[data-view="0"][data-view-present]:target ~ nav > .index-views > [data-view="0"],
    .anchor[data-view="1"][data-view-present]:target ~ nav > .index-views > [data-view="1"],
    .anchor[data-view="2"][data-view-present]:target ~ nav > .index-views > [data-view="2"],
    .anchor[data-view="3"][data-view-present]:target ~ nav > .index-views > [data-view="3"],
    .anchor[data-view="4"][data-view-present]:target ~ nav > .index-views > [data-view="4"] {
      color: var(--style--accent--bg);
      background-color: var(--style--accent--fg);
      a {
        color: inherit;
      }
    }

    .anchor[data-view="0"]:target ~ nav > .index-views > [data-view="1"][data-view-present="true"],
    .anchor[data-view="0"]:target ~ nav > .index-views > [data-view="2"][data-view-present="true"],
    .anchor[data-view="0"]:target ~ nav > .index-views > [data-view="3"][data-view-present="true"],
    .anchor[data-view="0"]:target ~ nav > .index-views > [data-view="4"][data-view-present="true"],
    .anchor[data-view="1"]:target ~ nav > .index-views > [data-view="0"][data-view-present="true"],
    .anchor[data-view="1"]:target ~ nav > .index-views > [data-view="2"][data-view-present="true"],
    .anchor[data-view="1"]:target ~ nav > .index-views > [data-view="3"][data-view-present="true"],
    .anchor[data-view="1"]:target ~ nav > .index-views > [data-view="4"][data-view-present="true"],
    .anchor[data-view="2"]:target ~ nav > .index-views > [data-view="1"][data-view-present="true"],
    .anchor[data-view="2"]:target ~ nav > .index-views > [data-view="0"][data-view-present="true"],
    .anchor[data-view="2"]:target ~ nav > .index-views > [data-view="3"][data-view-present="true"],
    .anchor[data-view="2"]:target ~ nav > .index-views > [data-view="4"][data-view-present="true"],
    .anchor[data-view="3"]:target ~ nav > .index-views > [data-view="1"][data-view-present="true"],
    .anchor[data-view="3"]:target ~ nav > .index-views > [data-view="2"][data-view-present="true"],
    .anchor[data-view="3"]:target ~ nav > .index-views > [data-view="0"][data-view-present="true"],
    .anchor[data-view="3"]:target ~ nav > .index-views > [data-view="4"][data-view-present="true"],
    .anchor[data-view="4"]:target ~ nav > .index-views > [data-view="1"][data-view-present="true"],
    .anchor[data-view="4"]:target ~ nav > .index-views > [data-view="2"][data-view-present="true"],
    .anchor[data-view="4"]:target ~ nav > .index-views > [data-view="3"][data-view-present="true"],
    .anchor[data-view="4"]:target ~ nav > .index-views > [data-view="0"][data-view-present="true"],
    .anchor[data-view="0"]:target ~ nav > .index-views > [data-view="1"],
    .anchor[data-view="0"]:target ~ nav > .index-views > [data-view="2"],
    .anchor[data-view="0"]:target ~ nav > .index-views > [data-view="3"],
    .anchor[data-view="0"]:target ~ nav > .index-views > [data-view="4"],
    .anchor[data-view="1"]:target ~ nav > .index-views > [data-view="2"],
    .anchor[data-view="1"]:target ~ nav > .index-views > [data-view="3"],
    .anchor[data-view="1"]:target ~ nav > .index-views > [data-view="4"],
    .anchor[data-view="1"]:target ~ nav > .index-views > [data-view="0"],
    .anchor[data-view="2"]:target ~ nav > .index-views > [data-view="3"],
    .anchor[data-view="2"]:target ~ nav > .index-views > [data-view="4"],
    .anchor[data-view="2"]:target ~ nav > .index-views > [data-view="0"],
    .anchor[data-view="2"]:target ~ nav > .index-views > [data-view="1"],
    .anchor[data-view="3"]:target ~ nav > .index-views > [data-view="4"],
    .anchor[data-view="3"]:target ~ nav > .index-views > [data-view="0"],
    .anchor[data-view="3"]:target ~ nav > .index-views > [data-view="1"],
    .anchor[data-view="3"]:target ~ nav > .index-views > [data-view="2"],
    .anchor[data-view="4"]:target ~ nav > .index-views > [data-view="0"],
    .anchor[data-view="4"]:target ~ nav > .index-views > [data-view="1"],
    .anchor[data-view="4"]:target ~ nav > .index-views > [data-view="2"],
    .anchor[data-view="4"]:target ~ nav > .index-views > [data-view="3"] {
      color: var(--style--accent--fg);
      background-color: var(--style--accent--bg);
      a {
        color: inherit;
      }
    }

    .anchor[data-view="0"]:target ~ section[data-view="1"][data-view-present="true"],
    .anchor[data-view="0"]:target ~ section[data-view="2"][data-view-present="true"],
    .anchor[data-view="0"]:target ~ section[data-view="3"][data-view-present="true"],
    .anchor[data-view="0"]:target ~ section[data-view="4"][data-view-present="true"],
    .anchor[data-view="1"]:target ~ section[data-view="0"][data-view-present="true"],
    .anchor[data-view="1"]:target ~ section[data-view="2"][data-view-present="true"],
    .anchor[data-view="1"]:target ~ section[data-view="3"][data-view-present="true"],
    .anchor[data-view="1"]:target ~ section[data-view="4"][data-view-present="true"],
    .anchor[data-view="2"]:target ~ section[data-view="1"][data-view-present="true"],
    .anchor[data-view="2"]:target ~ section[data-view="0"][data-view-present="true"],
    .anchor[data-view="2"]:target ~ section[data-view="3"][data-view-present="true"],
    .anchor[data-view="2"]:target ~ section[data-view="4"][data-view-present="true"],
    .anchor[data-view="3"]:target ~ section[data-view="1"][data-view-present="true"],
    .anchor[data-view="3"]:target ~ section[data-view="2"][data-view-present="true"],
    .anchor[data-view="3"]:target ~ section[data-view="0"][data-view-present="true"],
    .anchor[data-view="3"]:target ~ section[data-view="4"][data-view-present="true"],
    .anchor[data-view="4"]:target ~ section[data-view="1"][data-view-present="true"],
    .anchor[data-view="4"]:target ~ section[data-view="2"][data-view-present="true"],
    .anchor[data-view="4"]:target ~ section[data-view="3"][data-view-present="true"],
    .anchor[data-view="4"]:target ~ section[data-view="0"][data-view-present="true"],
    .anchor[data-view="0"]:target ~ footer[data-view="1"][data-view-present="true"],
    .anchor[data-view="0"]:target ~ footer[data-view="2"][data-view-present="true"],
    .anchor[data-view="0"]:target ~ footer[data-view="3"][data-view-present="true"],
    .anchor[data-view="0"]:target ~ footer[data-view="4"][data-view-present="true"],
    .anchor[data-view="1"]:target ~ footer[data-view="0"][data-view-present="true"],
    .anchor[data-view="1"]:target ~ footer[data-view="2"][data-view-present="true"],
    .anchor[data-view="1"]:target ~ footer[data-view="3"][data-view-present="true"],
    .anchor[data-view="1"]:target ~ footer[data-view="4"][data-view-present="true"],
    .anchor[data-view="2"]:target ~ footer[data-view="1"][data-view-present="true"],
    .anchor[data-view="2"]:target ~ footer[data-view="0"][data-view-present="true"],
    .anchor[data-view="2"]:target ~ footer[data-view="3"][data-view-present="true"],
    .anchor[data-view="2"]:target ~ footer[data-view="4"][data-view-present="true"],
    .anchor[data-view="3"]:target ~ footer[data-view="1"][data-view-present="true"],
    .anchor[data-view="3"]:target ~ footer[data-view="2"][data-view-present="true"],
    .anchor[data-view="3"]:target ~ footer[data-view="0"][data-view-present="true"],
    .anchor[data-view="3"]:target ~ footer[data-view="4"][data-view-present="true"],
    .anchor[data-view="4"]:target ~ footer[data-view="1"][data-view-present="true"],
    .anchor[data-view="4"]:target ~ footer[data-view="2"][data-view-present="true"],
    .anchor[data-view="4"]:target ~ footer[data-view="3"][data-view-present="true"],
    .anchor[data-view="4"]:target ~ footer[data-view="0"][data-view-present="true"] {
      display: none;
    }

    section[data-index-view="link-list"] {
      ol {
        list-style: decimal;

        li {
          display: inline-flex;

          a {
            display: inline-flex;
            flex-wrap: nowrap;

            width: 200px;
            margin: 5px 0;

            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
          }
        }

      }
    }

    section[data-index-view="profile"] {
      ul {
        list-style: none;
        width: 100%;

        li {
          display: flex;

          margin: 5px 0;
          padding: 10px;
          width: 100%;
          height: 100px;

          img {
            display: inline-block;
            width: auto;
            height: 77px;
            background-color: var(--color--resting);
          }

          div {
            display: inline-flex;
            flex-direction: column;

            width: 100%;

            margin-left: 10px;
          }
        }

        li:nth-child(odd) {
          color: var(--style--accent--fg);
          background-color: var(--style--accent--bg);

          a {
            color: var(--style--accent--fg);
          }
        }

      }
    }

    footer {
      .index-pagination {

        &[data-paginate="more"] {
          display: flex;
          align-items: center;
          align-content: center;
          justify-content: space-around;

          width: 100%;

          a {
            display: inline-flex;
            width: 134px;
            height: 34px;
            margin-top: var(--page--flex--gap);
            align-content: center;
            justify-content: center;
            align-items: center;
            background-color: var(--alternate--bg);
            color: var(--alternate--fg);
          }
        }

        &[data-paginate="page"] {
          display: flex;
          align-items: center;
          align-content: center;
          justify-content: center;

          width: 100%;

          & > :is(div,span,a) {
            display: inline-flex;
            width: 34px;
            height: 34px;
            margin-top: var(--page--flex--gap);
            align-content: center;
            justify-content: center;
            align-items: center;
          }

          & > :is(div,span) {
            opacity: 0.34;
          }

          & > span {
            width: auto;
            min-width: 42px;
          }

          & > a:hover {
            color: var(--style--accent--bg);
          }
        }

      }
    }

  }

}